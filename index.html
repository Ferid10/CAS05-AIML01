<!DOCTYPE html>
<html>
<head>
    <title>Ecommerce Chatbot</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Ecommerce Chatbot</h1>
    <div id="main-menu">
        <p>Choose an option:</p>
        <button onclick="processChoice('1')">Track Package</button>
        <button onclick="processChoice('2')">View Offers</button>
        <button onclick="enableChat()">Enable AI Chat</button>
        <button onclick="exitChat()">Exit</button>
    </div>
    <div id="chat-interface" style="display: none;">
        <p>AI Chat Enabled. Type 'exit' to return to the main menu.</p>
        <input type="text" id="user-input">
        <button onclick="sendChat()">Send</button>
        <div id="chat-log"></div>
    </div>
    <div id="result"></div>
    <script>
        function processChoice(choice) {
            $.ajax({
                url: "/process",
                type: "POST",
                data: { choice: choice },
                success: function (data) {
                    $("#result").html(data.result);
                }
            });
        }

        function enableChat() {
            $("#main-menu").hide();
            $("#chat-interface").show();
            $("#result").html("");
        }

        function sendChat() {
            var userInput = $("#user-input").val();
            $.ajax({
                url: "/process",
                type: "POST",
                data: { choice: "3", user_input: userInput },
                success: function (data) {
                    $("#chat-log").append("<p>You: " + userInput + "</p>");
                    $("#chat-log").append("<p>Chatbot: " + data.result + "</p>");
                    $("#user-input").val("");
                    if (userInput.toLowerCase() === "exit"){
                        $("#chat-interface").hide();
                        $("#main-menu").show();
                        $("#chat-log").html("");
                    }
                }
            });
        }
        function exitChat(){
            $("#result").html("Goodbye!");
            $("#main-menu").hide();
            $("#chat-interface").hide();
        }
    </script>
</body>
</html>